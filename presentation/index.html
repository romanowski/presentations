<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Incremental Compiler: taming Scalac</title>
	<meta name="description" content="What is and how works incremental compiler in sbt world">
	<meta name="author" content="Krzysztof Romanowski">

	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

	<meta name="viewport"
	      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
	<link href="https://fonts.googleapis.com/css?family=Frijole" rel="stylesheet">


	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/black.css" id="theme">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<style type="text/css">
		.lefty {
		text-align: left;
		font-size: 65% !important;
		margin-left: 5%  !important;
		}

		* {
			font-family: 'Frijole', cursive !important;
			font-weight: normal !important;
		}

		.marked {
			color: #bf3c3c !important;
		}

	</style>

	<!-- Printing and PDF exports -->
	<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );


	</script>

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>

<img src="imgs/vl.png" alt="Virtus Lab"
     style="background: none; border: none; box-shadow: none; position: absolute; bottom:10%; right: 10%;"/>

<div class="reveal">

	<!-- Any section element inside of this container is displayed as a slide -->
	<div class="slides">

		<section data-markdown>
			<script type="text/template">
				### Krzysztof Romanowski

				romanowski.kr@gmail.com

				<div style="margin-left: 36% text-align: left;">
					<img src="imgs/gh.png" style="background: none; border: none; margin: 0px"> romanowski
					<br/>
					<img src="imgs/twitter.png" style="background: none; border: none; margin: 0px"> RomanowskiKr

				</div>

				<img src="imgs/vl.png" alt="Virtus Lab" style="background: none; border: none; box-shadow: none"/>
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				# <span class="marked">Scala!</span>
				## Yes, but <span class="marked">why?</span>
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				# <span class="marked">$$$</span>

				TODO stack data
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				### <a href="https://scastie.scala-lang.org" class="marked">scastie.scala-lang.org</a>

				Try it as we speak
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
			All examples from talk:

			TODO better link!

			<a href="https://scastie.scala-lang.org/romanowski/OvgHqEYsRyeCGKBtA9ygtQ" class="marked">
					scastie.scala-lang.org/romanowski/OvgHqEYsRyeCGKBtA9ygtQ</a>

			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				> If I were to pick a language today other than Java, <span class="marked">it would be Scala</span>.
			>
			> James Gosling, father of <span class="marked">Java</span>

				TODO pic? formatting
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				> I can honestly say if someone had shown me the <span class="marked">Programming Scala book</span> by Martin Odersky, Lex Spoon & Bill Venners back in 2003 I'd probably have <span class="marked">never created Groovy</span>.
				>
				> James Strachan, creator of <span class="marked">Groovy</span>

				TODO pic? formatting
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				<span class="marked bigger">Scala</span> (bottom-up):


				* Syntax tricks
				* Types
				* Functions
				* Design principles
				* Problems
				* Ecosystem
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				I promise, there will be no Monads!
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
			Scala is <span class="marked">designed:</span> no special cases



				TOTO gist?

			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				## Disclaimer

				All presented features are just subset of what can Scala offer. I didn't want ... TODO (a'la poprawność polityczna).
			</script>
		</section>



		<section data-markdown>
			<script type="text/template">
				Syntax tricks

				```scala
				case class Vector(params: Seq[Int]) {
				  // operator is just a method named `*`
					def *(a: Int) = Vector((params map (_ * a)):_*)
					def `And we can be even crazier!` = "madness"
				}

				Vector(1, 2, 3) * 3
				Vector(1).`And we can be even crazier!`
				```

				```
				// for ... yield loop and if return value
				def abs(a: Int) = if(a < 0) -a else a //   value
				val sqrts = for(i <- Seq(1, 2, 3)) yield i * i
				```

				```
				// blocks return value and can define val/vars/def
				val a = {
				  val b = 3
					def sqrt(v: Int) = v * v
					sqrt(b)
				}

				// single expression don't need to be wrapped in {}
				if (isFriday) goForBeer() else {
					doALotOfWork()
					multipleTimes()
				}
				```
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Sidenote <span class="marked bigger">DSLs</span>

				<a href="https://github.com/fogus/baysick">BAYSICK</a> - supset of BASIC implemented as Scala <span class="marked">DSL</span>

				```
				// This compiles and run!
				object SquareRoot extends Baysick with App {
					10 PRINT "Enter a number"
					20 INPUT 'n
					30 PRINT "Square root of " % "'n is " % SQRT('n)
					40 END

					RUN
				}
				```

			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Syntax tricks

				```scala
				val immutable = Set(1, 2, 3) // good default in Scala

				if (unsafeOperation){
					import collection.mutable.Set
					val mutable = Set(1, 2, 3)
				}

				val immutableAgain = Set(1, 2, 3) // good default in Scala

				```
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Nesting

				```scala
				object A {
					val b = {
						def c()={
							object D {
								trait E {
									val F = {
										def G() = {
											class H {}
											"too deep!"
										}
									}
								}
							}
							B
						}
						c()
					}
				}

				```
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Types!

				```scala
				type IntMatrix = Array[Array[Int]]
				type Matrix[Type] = Array[Array[Type]]
				type NumericMatrix[Type <: Numeric] = Array[Array[Type]]

				def twice[A](matrix: NumericMatrix[A]): NumericMatrix[A] =
					for {
						row <- matrix
						elem <- row
					} yield row * 2

				```
				//TODO monad-hiding
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Types!

				Spoliers! Implicits. Typeclass.
				```scala
				def sort[A: Ordering](col: Seq[A]) = ???

				```
				//TODO monad-hiding
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Types!

				```scala
				class Animal
				class Dog extends Animal

				class Food[For+]
				def test(food: Food[Animal]) = ???

				test(new Food[Dog]) //try to implement this is Java

				class Function[Param-, Return+]
				def stringify(function: Function[Animal, CharSeq]) = ???
				stringify(new Function[Any, String])
				```

				//TODO monad-hiding
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Scala OOO, still better then Java.

				```scala
				trait Foo1 {
					def foo() = 1
				}

				trait Foo2 {
					def foo() = 2
				}

				class Bar extends Foo1 with Foo2 {
					foo() // 1 or 2 or does not compile?
				}

				```

				```scala
				trait Output { def println(msg: String) = ??? }
				object StdOutput extends Output

				val msg = "We can use inheritance static methods!"
				StdOutput.println(msg)

				```

				//TODO monad-hiding
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				case class


				```scala
				case class Point(a: Int, b: Int)

				// equals and hashCode, factory method...
				new Point(1,2) == Point(1,2) // true

				// ... copy method and fancy toString are generated for you
				println(Point(1,2).copy(b = 3)) // prints 'Point(1, 3)'

				```
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				pattern matching


				```scala
				case class Point(a: Int, b: Int)

				def isOnAxis(p: Point) = p match {
					case Point(0, _) => true
					case Point(_, 0) => true
					case other @ Point(x, y) if iWantToPrint(x, y) =>
						println("We can extract whole thing ($other)...")
						println("... or deconstruct parts ($x, $y).")
						println("We can always ")

			// TODO

				false
				}

				```
				// No special cases!
				object OnYAxis {
					def unapply(p: Point): Option[Int] =
					if(p.y == 0) Some(p.x) else None
				}
				def doSomething(p: Point) = p match {
					case OnYAxis(x) => x
				}

				// or even
				val OnYAxis(x) = Point(4, 0)

				```

			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Live example.
				How return 2 values from function?

				```scala
				val (a, b) = { // This is syntactic sugar for `Tuple2(a, b)`
					val a = costlyOperation()
					val b = costlyOperationOnA(a)
					(a, b) // This is syntactic sugar for `Tuple2(a, b)`
				}
				```
			</script>
		</section>

		<section data-markdown>
			<script type="text/template">
				Functions != Lambdas

				```scala
				val addOne: Int => Int = // `Int => Int` - type
					(a: Int) => a + 1 // definition


				val addAny: Int => Int => Int =
				(a: Int) => (b: Int) => a + b // definition

				val addTwo: Int => Int = addAny(2)
				```
			</script>
		</section>

		<!-- ################################################################################################################ -->
	</div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

			// The full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});













</script>

</body>
</html>
