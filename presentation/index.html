<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>50 shades of Scala Compiler</title>
	<meta name="description" content="Overview of scala compilers">
	<meta name="author" content="Krzysztof Romanowski">

	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

	<meta name="viewport"
	      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<style type="text/css">
		.lefty {
			text-align: left;
			font-size: 65% !important;
			margin-left: 5%  !important;
		}



	</style>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/black.css" id="theme">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );


	</script>

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>

<div class="reveal">

	<!-- Any section element inside of this container is displayed as a slide -->
	<div class="slides">

		<section data-markdown>
			<script type="text/template">
				### Krzysztof Romanowski

				romanowski.kr@gmail.com

				<div style="margin-left: 36% text-align: left;">
					<img src="imgs/gh.png" style="background: none; border: none; margin: 0px"> romanowski
					<br/>
					<img src="imgs/twitter.png" style="background: none; border: none; margin: 0px"> RomanowskiKr

				</div>

				<img src="imgs/vl.png" alt="Virtus Lab" style="background: none; border: none; box-shadow: none"/>
			</script>
		</section>

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					## 50 shades of Scala Compiler

					* TODO add shades!
				</script>
			</section>
		</section>

		<section>
			<section data-markdown>
				<script type="text/template">
					## How many scalac compiler
					### is out there?

					<br>

					> Scala Compiler Sees Two Forks in One Week
					> [Infoq on Sep 16, 2014](https://www.infoq.com/news/2014/09/scala-compiler-forks)
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					## Compiler

					> A compiler is a computer program (or a set of programs) that transforms source code written in a programming language (the source language) into another computer language (the target language), with the latter often having a binary form known as object code.
					>
					> wikipedia

					Note:
					Sth is a 'scala compiler' if:
					* scala sources as input

					* understand types and report type failure

					* better quotation is needed
				</script>
			</section>
		</section>

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					## scalac
				</script>
			</section>

			<section data-markdown data-separator-notes="Notes:">
				<script type="text/template">
					The point of reference

					<img src="imgs/scala-cover.png" style="max-width: 350px; background: none; border: none; margin: 15px"/>
					<img class="fragment" src="imgs/scalac-bugs.png" style="max-width: 650px; position: absolute; left: 133px; top: 301px;">


					Notes:
					* SLS (Scala language specification) should be used here - but no tests are created (but should)

					* scalac from command line, John Pretty is probably the only users
				</script>
			</section>
		</section>

		<section>
			<section data-markdown>
				<script type="text/template">
					## dotty
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO research slide who, why, where
				</script>
			</section>

			<section data-markdown data-separator-notes="Notes:">
				<script type="text/template">
					// TODO pic of dotty

					Notes:
				</script>
			</section>
		</section>

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					## Typelevel Scala and scalac

					> Let the Scala compiler work for you
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					Playground for scala

					<img src="imgs/typelevelscala-cover.png" style="max-width: 350px; background: none; border: none; margin: 15px">


					* Improved compile times for inductive implicits <!-- .element: class="fragment" -->
					* Improved error reporting for implicit resolution failures <!-- .element: class="fragment" -->
					* Support for alternative scala.Predef <!-- .element: class="fragment" -->
					* Even more on roadmap <!-- .element: class="fragment" -->

					Note:
					- Fameous fix: SI-2712 for Partial unification of type constructors

					- Playground for scala, use if you are affected by bugs it fixes (instead of workaround it yourself)

					- SIP-23 as example http://docs.scala-lang.org/sips/pending/42.type.html

					- TODO? history
					https://skillsmatter.com/skillscasts/9043-typelevel-scala-rebooted?utm_content=buffer2f364&utm_medium=social&utm_source=twitter.com&utm_campaign=buffer

				</script>
			</section>

			<section data-markdown>
				<script type="text/template" data-separator-notes="Notes:">
					More:

					* Mails's talks at [ScalaExchange 2016](https://skillsmatter.com/skillscasts/9043-typelevel-scala-rebooted)
					* Official page: [typelevel.org/scala](http://typelevel.org/scala/)
					* Hackking on scala: [milessabin.com/blog/2016/05/13/scalac-hacking](https://milessabin.com/blog/2016/05/13/scalac-hacking)
				</script>
			</section>
		</section>

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					## Triplequotes' Hydra compiler
				</script>
			</section>

			<section data-markdown data-separator-notes="Notes:">
				<script type="text/template">
					### Faster (parallel) scalac

					<img src="imgs/hydra-times.png">
					Note:
					* best speed up is 6x on 10 cores

				</script>
			</section>

			<section data-markdown data-separator-notes="Notes:">
				<script type="text/template">
					Triplequotes' Hydra compiler

					<img src="imgs/hydra-cover.png" style="max-width: 350px; background: none; border: none; margin: 15px"/>

					* SIP-25 in future <!-- .element: class="fragment" -->

					Notes:

					- Commercial product

					- closed beta tests

					- Parallel scala + sharing

					- Overhead

				</script>
			</section>

			<section>
				<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Awesome work by <a
					href="https://twitter.com/triple_quote">@triple_quote</a> with our team, our compilation times went down by
					50%! <a href="https://twitter.com/hashtag/scala?src=hash">#scala</a></p>&mdash; etorreborre (@etorreborre) <a
					href="https://twitter.com/etorreborre/status/830105082465103872">February 10, 2017</a></blockquote>
				<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

				<aside>
					- Eric Torreborre
					- spec2 + eff monad
				</aside>
			</section>
		</section>

		<!-- ################################################################################################################ -->


		<section>
			<section data-markdown>
				<script type="text/template">
					Do we want a compiler that does not support whole scala?

					<img class="fragment" src="imgs/partial-cover.png" style="max-width: 350px; background: none; border: none; margin: 15px"/>

				</script>
			</section>

			<section>
				<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">OH: &quot;I get this compiler error.&quot;
					... &quot;In Intellij or in real life?&quot;</p>&mdash; Miles Sabin (@milessabin) <a
					href="https://twitter.com/milessabin/status/841219815658393600">March 13, 2017</a></blockquote>
				<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
			</section>

			<section data-markdown>
				<script type="text/template">
					## Scala's toolbox compiler
				</script>
			</section>

			<section>
				<h4> Let's compile and run scala code in runtime</h4>
				<script src="https://gist.github.com/romanowski/8fcdf9c808b56eb6223e18c9b7715ea8.js"></script>

				Note:
				- better code then gist?
			</section>

			<section data-markdown data-separator-notes="Notes:">
				<script type="text/template">
					Toolbox - scalac in different universe

					<img src="imgs/toolbox-cover.png" style="max-width: 350px; background: none; border: none; margin: 15px"/>

					Notes:
					- TODO - better drawing!

					- Problems with enumeration of packages, strange nameing convention etc.

					- Used e.g. in ScalaIDE expression evaluator

					- alternative is scalac + tmpdir + classloading - a lot of problems

				</script>
			</section>
		</section>

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					## Incremental compilers
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					Is incremental compiler different compiler?
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					## What is incremental compiler?

					> An incremental compiler is a kind of incremental computation applied to the field of compilation.
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					> A compiler is incremental if it provides the programmer with a recompiled version of the program "by expending an amount of effort which is proportional to the size of the change made by the programmer."
					>
					> Popple, James (1987). Incremental Compilation and its Implementation in the PECAN Programming Environment Generator
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					### Incremental compiler
					## =
					### driver for scalac
				</script>
			</section>

			<section data-markdown  data-separator-notes="Notes:">
				<script type="text/template">
					Incremental compiler = driver for scalac

					//TODO - pic of the flow

					Notes:
					* Scalac can't recompile less then source

					* Pants, bazel - finer grain approach - TODO read about it!
				</script>
			</section>
		</section>

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					# Zinc
					## sbt incremental compiler <!-- .element: class="fragment" -->
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					### The story of Zinc?
					sbt incremental compiler ~> sbt-incremental compiler ~> sbt-inc compiler ~> s-inc compiler ~> zinc compiler

					For sbt 0.13.x is placed in sbt itself and in typsafehub/zinc

					In sbt 1.0.x pulled apart sbt to sbt/zinc

					Note:
					* TODO some history from old repo, nailgun etc https://github.com/typesafehub/zinc/commits/master?after=1e405d820cd051610578e4b372db0b668753de6b+244

					* TODO name story to remove?
				</script>
			</section>


			<section data-markdown>
				<script type="text/template">
					// TODO Pic Zinc onion: zinc -> compiler-bridge -> scala compiler
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO drawing for zinc phases
				</script>
			</section>

			<section data-markdown  data-separator-notes="Notes:">
				<script type="text/template">
					//TODO - zinc support

					Notes:
					* new layer of possible failures

					* overhead

					* name hashing and plain approach

					* Are you happy with it?
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					Scala Meta in zinc before it was even cool :)

					```
					// TODO gist etc
					```
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					### Shameless plug: Hoarder

					Don’t repeat yourself when compiling!

					[github.com/romanowski/hoarder](https://github.com/romanowski/hoarder)
				</script>
			</section>

		</section>

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					## Intellij's
					## incremental compiler
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					// intellij's onion: bytecode -> zinc's compiler-bridge -> scala compiler
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO - intellij's support

					Note:
					- macros, implicits potential usage in scala

					- keep your compiler hot
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO - implicit example not handled by Intellij
				</script>
			</section>

			<section data-markdown data-separator-notes="alamakotawpaski:">
				<script type="text/template" >
					Sidenote: Why do you need to keep your compiler (nailgun, sbt, etc) hot!

					TODO: Rory's talk
				</script>
			</section>
		</section>

		<!-- ################################################################################################################ -->
		<section>
			<section data-markdown>
				<script type="text/template">
					## Presentation compiler

					Note:
					- Have you ever use presentation compiler?

					- Have you ever use Intellij/ScalaIDE/Ensime? if so all of you should raise your before!
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					#### Instant typing
					// TODO pics of errors
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					#### Code completion

					// TODO pics of code completion
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					#### Refactorings

					// TODO pics of refactoring
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					| **compiler** | **presentation-compiler** |
					| -- | -- |
					| produce bytecode + errors/warnings | answer questions |
					| should fail ASAP | should provide as much data as possible |
					| batch mode | interactive mode |
					| don't share any data | provide data to other tools (e.g. refactorings) |
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					Is presentation compiler **a compiler**?

					Note:
					* //TODO some sources about it
				</script>
			</section>
		</section>
		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					## scalac
					## presentation compiler
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					// scalac presentation compiler flow: full build -> rebuild of source

					Note:
					- TODO check this and find perks
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					| ideal presentation-compiler | scalac presentation compiler |
					| -- | -- |
					| answer questions | OK |
					| should provide as much data as possible | all or none |
					| interactive mode | interactive after initial batch mode |
					| provide data to other tools | data are provided as pieces of code evaluated in compiler context |
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO - scalac presentation compiler support - with response time

					Note:
					- used in ScalaIDE and ensime

					- ensime: try to do as much as possible without it

					- full support for macros and other crazy stuff
				</script>
			</section>

			<section>
				<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">OH: &quot;I get this compiler error.&quot;
					... &quot;In Intellij or in real life?&quot;</p>&mdash; Miles Sabin (@milessabin) <a
					href="https://twitter.com/milessabin/status/841219815658393600">March 13, 2017</a></blockquote>
				<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

				TODO -  pic not apply here!
			</section>
		</section>

		<!-- ################################################################################################################ -->


		<section>
			<section data-markdown>
				<script type="text/template">
					# Intellij presentation compiler
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO intellij presentation compiler flow: process source and ask dependencies

					//TODO pic analysis in process
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					| ideal presentation-compiler | scalac presentation compiler |
					| -- | -- |
					| answer questions | OK |
					| should provide as much data as possible | OK (a lot if code can be parsed) |
					| interactive mode | interactive after initial batch mode |
					| TODO more | TODO more |
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO pic with intellij as one of a kind - not based on scalac
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					<img src="imgs/jason-contribitutions.png"/>

					[github.com/JetBrains/intellij-scala/graphs/contributors](https://github.com/JetBrains/intellij-scala/graphs/contributors)
					Note:
					* Intellij's presentaiton compilers has Jason Zaugg in common with scalac :)
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO - intellij presentation compiler support - with holes etc
				</script>
			</section>

			<section>
				<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">OH: &quot;I get this compiler error.&quot;
					... &quot;In Intellij or in real life?&quot;</p>&mdash; Miles Sabin (@milessabin) <a
					href="https://twitter.com/milessabin/status/841219815658393600">March 13, 2017</a></blockquote>

				Macros, deeply nested implicits, strange types... scala.meta as a rescue?
			</section>

		</section>

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					//TODO Kentucky mule?
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO Compiler plugins
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO Macros
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					//TODO fade away
				</script>
			</section>

		</section>

		<!-- ################################################################################################################ -->


		<section>
			<section data-markdown>
				<script type="text/template">
					### Krzysztof Romanowski

					romanowski.kr@gmail.com

					<div style="margin-left: 36% text-align: left;">
						<img src="imgs/gh.png" style="background: none; border: none; margin: 0px"> romanowski
						<br/>
						<img src="imgs/twitter.png" style="background: none; border: none; margin: 0px"> RomanowskiKr

					</div>

					<img src="imgs/vl.png" alt="Virtus Lab" style="background: none; border: none; box-shadow: none"/>
				</script>
			</section>
		</section>

		<!-- ################################################################################################################ -->

		<!-- ################################################################################################################ -->

		<section>
			<section data-markdown>
				<script type="text/template">
					# Presentation compiler hints!
				</script>
			</section>

			<section data-markdown>
				<script type="text/template">
					# Incremental compiler hints!
				</script>
			</section>
		</section>

	</div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});



</script>
</body>
</html>